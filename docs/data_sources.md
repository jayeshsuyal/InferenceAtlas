# Data Sources

This document describes the pricing data pipeline, provider coverage, and data provenance for InferenceAtlas.

> **Note:** This file was previously organized per-provider with manually maintained pricing tables. As of the catalog_v2 pipeline, pricing data is loaded from `data/catalog_v2/pricing_catalog.json`, which is generated from structured CSV files and live API connectors. Per-provider pricing tables are maintained in `data/providers_csv/` and in the CSV files' `source_url` column.

---

## Data Pipeline

InferenceAtlas uses a three-tier ingestion strategy:

**Tier 1: Live API connectors** (highest priority, when secrets configured)
- fal.ai pricing API (`FAL_AI_PRICING_API_URL`, `FAL_KEY`)
- AWS Rekognition pricing API (`AWS_REKOGNITION_PRICING_API_URL`)
- Google Cloud pricing API (`GOOGLE_CLOUD_PRICING_API_URL`, `GOOGLE_CLOUD_PRICING_API_TOKEN`)

**Tier 2: Provider CSV files** (fallback when API is unavailable)
- 13 provider CSV files in `data/providers_csv/`
- Normalized to `CanonicalPricingRow` schema on load

**Tier 3: Bundled catalog snapshot** (always-available fallback)
- `data/catalog_v2/pricing_catalog.json`
- Generated by the daily sync workflow and committed to the repo
- Guaranteed to exist even if all API and CSV sources fail

For more on sync mechanics, see [data_freshness.md](data_freshness.md).

---

## Current Coverage

**Snapshot date:** 2026-02-16
**Total rows:** 578
**Providers:** 16
**Workload types:** 11 raw tokens (normalized to 8 workload categories in app)

| Provider | SKUs | Source date | Primary workloads |
|---|---|---|---|
| Fireworks | 220 | 2026-02-16 | llm, vision, image_generation |
| Together AI | 119 | 2026-02-16 | llm, video_generation, image_generation |
| OpenAI | 55 | 2026-02-16 | llm, image_generation, embeddings, speech_to_text, text_to_speech, moderation, video_generation |
| Anthropic | 24 | 2026-02-16 | llm |
| ElevenLabs | 16 | 2026-02-16 | text_to_speech, speech_to_text |
| Cohere | 15 | 2026-02-16 | llm, embeddings |
| Deepgram | 15 | 2026-02-16 | speech_to_text, text_to_speech |
| Voyage AI | 11 | 2026-02-16 | embeddings |
| Baseten | 8 | 2026-02-16 | llm, image_generation |
| Modal | 8 | 2026-02-16 | gpu_pricing (llm) |
| AssemblyAI | 7 | 2026-02-16 | speech_to_text |
| Replicate | 5 | 2026-02-16 | gpu_pricing (llm) |
| RunPod | 5 | 2026-02-16 | gpu_pricing (llm) |
| fal.ai | 22 | 2026-02-16 | llm, image_generation |
| aws_rekognition | 22 | 2026-02-16 | vision |
| google_cloud | 26 | 2026-02-16 | vision |

---

## Canonical Schema

Every pricing row in the catalog has these fields:

| Field | Type | Description |
|---|---|---|
| `provider` | string | Provider identifier (lowercase, underscore) |
| `workload_type` | string | Canonical workload type |
| `sku_key` | string | Unique SKU identifier |
| `sku_name` | string | Human-readable SKU name |
| `billing_mode` | string | `per_token`, `per_image`, `per_hour`, `per_character`, etc. |
| `model_key` | string | Model identifier (empty for GPU/infra pricing) |
| `unit_price_usd` | float | Price per unit |
| `unit_name` | string | Unit of measure (e.g., `1m_tokens`, `audio_hour`, `image`) |
| `region` | string | Provider region or `global` |
| `source_date` | string | ISO date of last data collection |
| `confidence` | string | `high`, `medium`, `estimated`, `low` |
| `source_kind` | string | `provider_api`, `provider_csv`, or `normalized_catalog` |
| `source_url` | string | URL to provider pricing page |

---

## Confidence Levels

| Value | Meaning |
|---|---|
| `high` | From official provider documentation, verified on source_date |
| `medium` | Community-verified or cross-referenced from multiple sources |
| `estimated` | Derived from similar offerings; not confirmed by provider |
| `low` | Listed but not independently verified or confirmed stale |

501 of 578 current rows are `confidence: high` (verified from official vendor sources on 2026-02-16). 67 rows are `confidence: estimated` and 10 are `confidence: medium`.

---

## LLM Optimizer Data Sources

The LLM capacity optimizer (`rank_configs`) uses separate data files from the catalog:

| File | Contents |
|---|---|
| `data/providers.json` | Provider offerings: billing_mode, pricing, GPU type, model refs |
| `data/models.json` | Curated model list with size buckets and multiplier knobs |
| `data/capacity_table.json` | GPU throughput benchmarks (tok_s_1gpu) per model_bucket × gpu_type |

These files are maintained separately from `catalog_v2` and are used only for LLM capacity planning. Pricing in `providers.json` may differ from `catalog_v2` because they target different use cases: `providers.json` is used for GPU-backed capacity planning, while `catalog_v2` covers per-token API pricing.

### Throughput Data

GPU throughput entries in `capacity_table.json` have:
- `source_type`: `measured` or `estimated`
- `confidence`: float 0.0–1.0
- `source_note`: Brief description of source

Measured values are sourced from vLLM benchmarks, provider-published benchmarks (Fireworks AI, Together AI), and community benchmarks. Estimated values are extrapolated from memory bandwidth ratios.

---

## Known Data Gaps

1. **Video generation pricing** is early-stage; rates for Together AI video models may lag behind actual pricing
2. **GPU pricing** (Modal, Replicate, RunPod) reflects on-demand rates; spot pricing is not modeled
3. **Volume discounts** are not included; all rates are on-demand
4. **Custom enterprise pricing** is not available and cannot be modeled

---

## Data Update Process

Pricing is updated via the daily sync workflow. To manually update data:

1. Edit the relevant provider CSV in `data/providers_csv/`
2. Update `source_date` and `source_url` in the CSV rows
3. Run `python scripts/sync_catalog_v2.py --providers all`
4. Commit `data/catalog_v2/pricing_catalog.json`

For structural changes to the schema, update `data/catalog_v2/pricing_catalog.schema.json` and validate all CSV files against it.

---

## Disclaimer

Pricing data is collected from public vendor documentation for planning purposes. Prices change frequently. Always verify with provider websites before making infrastructure commitments. Enterprise contracts, committed-use discounts, and regional pricing variations may differ significantly from the values in this catalog.
